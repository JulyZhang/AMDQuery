<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>AMDQuery</title>
    <meta charset="utf-8" />
    <link href="../css/reset.css" rel="stylesheet" type="text/css" />
    <link href="../css/document.css" rel="stylesheet" type="text/css" />
    <link href="../css/prettify/drupalorg.css" rel="stylesheet" type="text/css" />
    <link href="../css/combination.css" rel="stylesheet" type="text/css" />
    <script src="../js/prettify.js" type="text/javascript"></script>
    <script src="/amdquery/amdquery.js" type="text/javascript" amdquery="debug:false;autoFetchCss:0" amd="detectCR=1" module="transitionToAnimation:0" ui="initWidget:1;isTransform3d:0"></script>
    <script type="text/javascript" src="../js/scrollTo.js"></script>
    <script type="text/javascript">
      $.require(["main/query", "main/event", "ui/swapview"], function(query, event){
        $(".swip_to_app").click(function(e){
          $("#swapview").uiSwapview("option", "index", 1);
        });
      });
    </script>
</head>
<body style="width: 100%; height: 100%;" onload="prettyPrint()">
  <div amdquery-widget="ui.flex" ui-flex="flex:1;flexDriection:row">
    <div style="width:20px;" amdquery-widget="ui.flex" ui-flex="fillParentWidth:false" ></div>
    <div class="document" id="swapview" style="" amdquery-widget="ui.swapview;ui.flex" ui-flex="flex:1" ui-swapview="orientation:H">
      <ol>
        <li id="first">
          <div id="scrollableview" style="width: 100%; height: 100%;" amdquery-widget="ui.scrollableview" ui-scrollableview="orientation:V;enableKeyboard:true;">
            <h1 name="Definition" >Build Definition</h1>

            <ul class="guide">
              <li><a href="#Overview" >Overview</a>
              </li>
              <li><a href="#Quick" >Quick Start</a>
              </li>
              <li><a href="#Browser" >Broswer html</a>
              </li>
              <li><a href="#Dependencies" >Build Dependencies</a>
              </li>
              <li><a href="#Config" >Config</a>
              </li>
            </ul>

            <h2 name="Overview" id="Overview">Overview</h2>
            <p>This guide teach you how to combine javascript to a file and minify it. It could reduce file size and http request.</p>
            <p>The Building apply <a target="_blank" href="http://www.nodejs.org">nodejs</a> to build and conbine javascript. It load javascript according to <a target="_blank" href="http://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a>
standard.</p>

            <h3 name="Quick" id="Quick">Quick Start</h3>
            <p>Download nodejs and install nodejs. Open terminal and cd directory of amdquery project, cd build. </p>
            <p>Input "npm install" in terminal before start building. NPM will download and install some node modules.</p>
            <p>Input "node build.js build_config.js" and watch the log. <p/>
            <p>Look the directory: build/output/defines. Look over "test.js" and "test.debug.js".<p/>
            <p>cd "output/apps/document/app", open the "app.html" with a web server. <p/>

            <h3 name="Browser" id="Browser">Broswer html</h3>
            <p>Quick start a web server. Input "npm install -g <a target="_blank" href="https://github.com/senchalabs/connect">connect</a>" or "sudo npm install -g <a target="_blank" href="https://github.com/senchalabs/connect">connect</a>". cd root of amdquery directory, input "node server.js". Open browser and input <blod>"http://localhost:8080/document/app/app.html"</blod> or <blod>"http://localhost:8080/build/output/apps/document/app/app.html"</blod>. You should collect the address in browser.</p>
            <p>The <a class="swip_to_app" ><img src="../images/right.png" width="13px" height="13px"/>"Build Application"</a> has detail guide.</p>

            <h3 name="Dependencies" id="Dependencies">Build Dependencies</h3>
            <p>Node Modules:</p>
            <ul class="guide" style="margin-top: 0">
              <li><a target="_blank" href="https://github.com/isaacs/node-glob" >glob</a><span>>3.x.x</span>
              </li>
              <li><a target="_blank" href="https://github.com/caolan/async" >async</a><span>>0.0.0</span>
              </li>
              <li><a target="_blank" href="https://github.com/mishoo/UglifyJS" >uglify-js</a><span>~1.x.x</span>
              </li>
              <li><a target="_blank" href="https://github.com/GoalSmashers/clean-css" >clean-css</a><span>>0.0.0</span>
              </li>
              <li><a target="_blank" href="https://github.com/substack/node-trumpet" >trumpet</a><span>>0.0.0</span>
              </li>
              <li><a target="_blank" href="https://github.com/jashkenas/underscore" >underscore</a><span>>0.0.0</span>
              </li>
              <li><a target="_blank" href="https://github.com/jprichardson/node-fs-extra" >fs-extra</a><span>>0.0.0</span>
              </li>
              <li><a target="_blank" href="https://github.com/dominictarr/through" >through</a><span>~2.3.4</span>
              </li>
              <li><a target="_blank" href="https://github.com/maxogden/node-concat-stream" >concat-stream</a><span>~1.0.0</span>
              </li>
            </ul>
            <h2 name="Config" id="Config" >Config</h2>
            <p>This guide would explain how to config build. </p>
            <p>cd "build/", open "build.js".</p>
            <pre class="prettyprint">
Directory Structure
--amdquery //root
    --amdquery
        amdquery.js
    --build
        build.js
        build_config.js
        --output
            --defines
                test.debug.js
                test.js
        --test
            --test.js
    --document
            </pre>
            <ul class="guide">
              <li>
                <h4>amdqueryPath</h4>
                <p>Configure amdquery.js path. It is relative of build.js .</p>
                <p>exports.amdqueryPath = '../amdquery/'; (--amdquery)</p>
              </li>
              <li>
                <h4>projectRootPath</h4>
                <p>Configure project root path. It is relative of build.js .</p>
                <p>exports.projectRootPath = '../../'; (--amdquery //root)</p>
              </li>
              <li>
                <h4>outputPath</h4>
                <p>All build files will save to outputPath. It is relative of build.js .</p>
                <p>exports.outputPath = 'output/'; (--output)</p>
              </li>
              <li>
                <h4>pathVariable</h4>
                <p>exports path to load js</p>
                <pre class="prettyprint">
{
  "@app":"../document/app/app",
  "@mypath:":"../test/app/app"
}
                </pre>
              </li>
              <li>
                <h4>debug</h4>
                <p>whatever print log, true or false</p>
              </li>
              <li>
                <h4>apps</h4>
                <p>check detail<a class="swip_to_app" ><img src="../images/right.png" width="13px" height="13px"/>"Build Application"</a></p>
              </li>
              <li>
                <h4>defines</h4>
                <pre class="prettyprint">
{
  test: {
    path: "../document/app/asset/source/js/scrollTo",
    directory: [ "ui/" ],
    complete: function( minPath, minContent, deubugPath, content ) {
      var FSE = require( 'fs-extra' );
      path = "../document/app/asset/source/js/amdquery.js";
      FSE.writeFile( path, content );
    }
  }
}
                </pre>
              </li>
              <li>
                <h4>uglifyOptions</h4>
                <p></p>
              </li>
              <li>
                <h4>cleanCssOptions</h4>
                <p></p>
              </li>
            </ul>

            <a float="false" href="#Definition" class="Top">Top</a>
          </div>
        </li>
        <li>
          <h1>Building Application</h1>
        </li>
        <li>
          <h1>cleanCss And uglify options</h1>
        </li>
      </ol>
      <ol style="width:100px;height:20px;" amdquery-widget="ui.swapindicator" ui-swapindicator="orientation:H">
        <li></li>
        <li></li>
        <li></li>
      </ol>
    </div>
    <div style="width:20px;" amdquery-widget="ui.flex" ui-flex="fillParentWidth:false" ></div>
  </div>
</body>
</html>
