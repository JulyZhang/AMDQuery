<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title></title>
  <link href="../../../global/styles/reset.css" rel="stylesheet" type="text/css" />
  <script src="../../../amdquery/amdquery.js" type="text/javascript" amdquery="define:$;" amd="detectCR:1;" module="compatibleEvent:1;testLogByHTML:1"></script>

  <script type="text/javascript">
    $.require(["main/query", "main/position", "main/css", "module/Test"], function( query, position, css, Test ) {

      var rect = $( "#rect" );

      var testPosition = new Test("TestPosition", function(preResult){
        // complete
      }).task("Test div rect width:", function(preResult, equal, execute){
        equal("Width is 50, because it`s parent is 50.", rect.width(), 50);

        execute("Set width 30", function(){
          rect.width(30);
        });
        equal("Width is 30.", rect.width(), 30);

        execute("Set width '60px'", function(){
          rect.width("60px");
        });
        equal("Width is 60.", rect.width(), 60);

        execute("Set padding-left '5px' and padding-right '5px'", function(){
          rect.css({
            "padding-left": "5px",
            "padding-right": "5px"
          });
        });
        equal("Width is 60.", rect.width(), 60);
        equal("Inner width is 70.", rect.innerWidth(), 70);

        execute("Set inner width 40", function(){
          rect.innerWidth(40);
        });
        equal("Width is 30.", rect.width(), 30);
        equal("Inner width is 40.", rect.innerWidth(), 40);

        execute("Set outer width 80", function(){
          rect.outerWidth(80);
        });
        equal(" Width is 70.", rect.width(), 70);
        equal("Inner width is 80.", rect.innerWidth(), 80);

        execute("Set margin-left '5px' and margin-right '5px'", function(){
          rect.css({
            "margin-left": "5px",
            "margin-right": "5px"
          });
        });

        equal("Width is 70.", rect.width(), 70);
        equal("Inner width is 80.", rect.innerWidth(), 80);
        equal("Outer width is 80.", rect.outerWidth(), 80);

        execute("Set border-left '5px' and border-right '5px'", function(){
          rect.css({
            "border-left": "5px solid black",
            "border-right": "5px solid black"
          });
        });
        equal("Width is 70.", rect.width(), 70);
        equal("Inner width is 80.", rect.innerWidth(), 80);
        equal("Outer width is 90.", rect.outerWidth(), 90);
        equal("Outer width and border is 100.", rect.outerWidth(true), 100);

      }).task("Test div rect height:", function(preResult, equal, execute){
        equal("Height is 0.", rect.height(), 0);

        execute("Set height 30", function(){
          rect.height(30);
        });
        equal("Height is 30.", rect.height(), 30);

        execute("Set height '60px'", function(){
          rect.height("60px");
        });
        equal("Height is 60.", rect.height(), 60);

        execute("Set padding-top '5px' and padding-bottom '5px'", function(){
          rect.css({
            "padding-top": "5px",
            "padding-bottom": "5px"
          });
        });
        equal("Height is 60.", rect.height(), 60);
        equal("Inner height is 70.", rect.innerHeight(), 70);

        execute("Set inner height 40", function(){
          rect.innerHeight(40);
        });
        equal("Height is 30.", rect.height(), 30);
        equal("Inner height is 40.", rect.innerHeight(), 40);

        execute("Set outer height 80", function(){
          rect.outerHeight(80);
        });
        equal(" Height is 70.", rect.height(), 70);
        equal("Inner height is 80.", rect.innerHeight(), 80);

        execute("Set margin-top '5px' and margin-bottom '5px'", function(){
          rect.css({
            "margin-top": "5px",
            "margin-bottom": "5px"
          });
        });

        equal("Height is 70.", rect.height(), 70);
        equal("Inner height is 80.", rect.innerHeight(), 80);
        equal("Outer height is 80.", rect.outerHeight(), 80);

        execute("Set border-top '5px' and border-bottom '5px'", function(){
          rect.css({
            "border-top": "5px solid black",
            "border-bottom": "5px solid black"
          });
        });
        equal("Height is 70.", rect.height(), 70);
        equal("Inner height is 80.", rect.innerHeight(), 80);
        equal("Outer height is 90.", rect.outerHeight(), 90);
        equal("Outer height and border is 100.", rect.outerHeight(true), 100);

      }).task("Test scroll size.", function(preResult, equal, execute){
        equal("Div rect parent`s scroll width is greate than 50", rect.parent().scrollWidth() > 50, true);
        equal("Div rect parent`s scroll height is greate than 50", rect.parent().scrollHeight() > 50, true);
      }).start();
    });
  </script>
</head>

<body style="overflow: auto;position: absolute">
  <div id="parent" style="position:absolute;width:50px;height:50px;top:50px;left:50px;">
    <div id="rect" style="background-color:red;"></div>
  </div>
</body>

</html>
