
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title></title>
  <link href="../css/reset.css" rel="stylesheet" type="text/css" />
  <!-- <script src="http://192.168.1.102:8080/package/../../amdquery/amdquery.js" type="text/javascript" amdquery="define:$;amd:false"></script>-->
  <script src="../../amdquery/amdquery.js" type="text/javascript" amdquery="define:$;package:main;" amd="detectCR:1;" moudule="compatibleEvent:1;"></script>
  <!--<script src="../../amdquery/oye.js" type="text/javascript"></script>-->
  <script type="text/javascript">
    $.require([
      "base/typed",
      "main/event",
      "main/CustomEvent",
      "main/query"
      //,"module/Thread"
    ], function(typed, event, CustomEvent, query) {
      var cus = new CustomEvent();
      var multibind = function() {
        alert("multibind");
      }
      cus.on("a.b a.b.c", multibind);

      // cus.on("a.b.c", function () {
      //     alert("a.b.c");
      // });

      cus.on("a.b.pp", function() {
        alert("a.b.pp");
      });

      // cus.trigger("a.b");
      // cus.trigger("a.b.c");
      // cus.trigger("a.b.pp");

      // cus.off("a.b a.b.c", multibind)

      // cus.trigger("a.b");
      // cus.trigger("a.b.c");
      // cus.trigger("a.b.pp");

      var a = "123";
      // $("body").delegate("div,#a", "click", function (e) {
      //     alert(this.id);
      // });

      var test1 = $("#a");
      var fn1 = function(str) {
        $.logger(typed.isEvent(str))
        $.logger({}.toString.call(str))

        // alert(str || "fn1");
      },
        fn2 = function(str) {
          // str.stopPropagation();
          // alert(str.screenX || "fn2");
          //这里停止向body 冒泡 所以点击不到
        },
        fn3 = function(e) {
          var code = $.event.document.getCharCode(e);
          alert(code);
        },
        fn4 = function(e) {
          alert(e.info);
        };
      test1.on("mousedown", fn1);

      // test1.on("mousedown mouseup", fn2);

      //test1.off("mousedown", fn2);

      //test1.off("mousedown mouseup", fn2);

      test1.toggle(function() {
        alert(1)
      }, function() {
        alert(2)
      });

      test1.toggle();

      test1.trigger("mousedown", {
        screenX: 4
      });

      test1.clearHandlers("mousedown mouseup")

      test1.trigger("mousedown", {
        screenX: 5
      });


      // test1.trigger("mouseup", {
      //     screenX: 6
      // });

      test1.once("testonce", function() {
        $.logger("trigger once")
      });

      var obj = {
        name: "abc"
      }

      test1.trigger("testonce", obj);

      test1.trigger("testonce", obj);

      return

      test1.on("my.test1", fn1);
      test1.on("my.test1", fn1);

      test1.click(fn2);

      test1.trigger("my.test1", {
        screenX: 5
      });

      test1.off("my.test1", fn1);

      test1.trigger("my.test1", {
        screenX: 5
      });

      test1.trigger("click", {
        screenX: 5
      });

      test1.keydown(fn3, null, {});
      test1.focus(fn4);

      test1.trigger("my.test1", null, "go");

      $.addHandler("test.test", function() {
        alert("test10")
      });

      $.trigger("test.test");

      //test1.removeHandler("my.test1", fn1);
      //test1.trigger("my.test1", null, "go");

      //                $(document.body).addHandler("click", function () {
      //                    alert("bubbles");
      //                });

      test1.trigger("click", {
        screenX: 5
      });
      test1.trigger("keydown", {
        keyCode: 65,
        charCode: 64
      });
      test1.trigger("focus", {
        info: "abc"
      });

      test1.addHandler("my.test1", null);

      test1.trigger("my.test1", null, "go");
    });
  </script>
</head>

<body style="overflow: auto">
  <div id="a" style="width: 100px; height: 100px; background-color: Red;">
  </div>
  <div id="b" style="width: 100px; height: 100px; background-color: Green;">
  </div>
</body>

</html>
